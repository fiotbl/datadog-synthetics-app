<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADB Project Funding - Login</title>
<script>
  (async function() {
    try {
      // Fetch the configuration from our new API endpoint
      const response = await fetch('/api/config');
      const config = await response.json();

      if (config.clientToken && config.applicationId) {
        // Standard RUM loader script
        (function(h,o,u,n,d) {
          h=h[d]=h[d]||{q:[],onReady:function(c){h.q.push(c)}}
          d=o.createElement(u);d.async=1;d.src=n
          n=o.getElementsByTagName(u)[0];n.parentNode.insertBefore(d,n)
        })(window,document,'script','https://www.datadoghq-browser-agent.com/us1/v5/datadog-rum.js','DD_RUM');

        // Initialize RUM with the fetched tokens
        DD_RUM.onReady(function() {
          DD_RUM.init({
            clientToken: config.clientToken,
            applicationId: config.applicationId,
            site: 'datadoghq.com',
            service: 'adb-workshop-frontend',
            env: 'workshop',
            version: '1.0.1', // Incremented version
            sessionSampleRate: 100,
            sessionReplaySampleRate: 100,
            trackUserInteractions: true,
            trackResources: true,
            trackLongTasks: true,
            defaultPrivacyLevel: 'allow'
          });
        });
      }
    } catch (error) {
      console.error('Failed to load Datadog RUM config:', error);
    }
  })();
</script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <img src="https://www.shiftcities.org/sites/default/files/styles/og_image/public/2021-11/ADB%20logo%20stacked.png?itok=c8mszcVB" alt="ADB Logo" class="logo">
            <h1>Project Funding Dashboard</h1>
        </header>
        <main class="login-form">
            <h2>Login</h2>
            <p>Use `admin` and `Password123!` to login.</p>
            <input type="text" id="username123" placeholder="Username">
            <input type="password" id="password" placeholder="Password">
            <button id="login-btn">Login</button>
            <p id="error-message" class="error"></p>
        </main>
    </div>
    <script src="script.js"></script>
</body>
</html>
